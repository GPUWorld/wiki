<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>

<!--
<link rel="Stylesheet" type="text/css" href="style.css">
-->
<link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
<link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
<link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<title>od</title>
<meta http-equiv="Content-Type" content="text/html; charset=cp950">
</head>
<body>
<header>
<div class="inner">
<h1>Wiki</h1>
<h2>by yszheda</h2>
<a href="https://github.com/yszheda/wiki" class="button"><small>View project on</small>GitHub</a>
</div>
</header>

<div id="content-wrapper">
<div class="inner clearfix">
<section id="main-content">

<h1 id="toc_1">od: octal dump</h1>
<div class="toc">
<ul>
<li><a href="#toc_1">od: octal dump</a>
<ul>
<li><a href="#toc_1.1">Common Usage</a>
<li><a href="#toc_1.2">Samples</a>
</ul>
</ul>
</div>
<h2 id="toc_1.1">Common Usage</h2>

<pre>
# -t = --format
# x: hexadecimal
# x1: one bytes per integer
# -A: offset
$ od -t x1 -A x /etc/ld.so.cache | head -3
000000 6c 64 2e 73 6f 2d 31 2e 37 2e 30 00 84 03 00 00
000010 03 03 00 00 20 55 00 00 2a 55 00 00 03 03 00 00
000020 3b 55 00 00 43 55 00 00 03 03 00 00 56 55 00 00
</pre>

<pre>
# show ASCII as well
$ od -t x1z -A x /etc/ld.so.cache | head -3
000000 6c 64 2e 73 6f 2d 31 2e 37 2e 30 00 84 03 00 00  &gt;ld.so-1.7.0.....&lt;
000010 03 03 00 00 20 55 00 00 2a 55 00 00 03 03 00 00  &gt;.... U..*U......&lt;
000020 3b 55 00 00 43 55 00 00 03 03 00 00 56 55 00 00  &gt;;U..CU......VU..&lt;
# or
$ od -t x1c -A x /etc/ld.so.cache | head -5
000000  6c  64  2e  73  6f  2d  31  2e  37  2e  30  00  84  03  00  00
         l   d   .   s   o   -   1   .   7   .   0  \0 204 003  \0  \0
000010  03  03  00  00  20  55  00  00  2a  55  00  00  03  03  00  00
       003 003  \0  \0       U  \0  \0   *   U  \0  \0 003 003  \0  \0
000020  3b  55  00  00  43  55  00  00  03  03  00  00  56  55  00  00

</pre>

<pre>
-v, --output-duplicates
              do not use * to mark line suppression
</pre>

<p>
Print strings:
</p>
<pre>
# show hexadecimal offsets
$ od -Ax --string /etc/ld.so.cache | head -5
000000 ld.so-1.7.0
007f60 libz.so.1
007f6a /lib64/libz.so.1
007f7b libz.so
007f83 /usr/lib64/libz.so
# do not show offsets
$ od -An --string /etc/ld.so.cache | head -5
ld.so-1.7.0
libz.so.1
/lib64/libz.so.1
libz.so
/usr/lib64/libz.so
</pre>

<p>
The differences between ``<code>od</code>`<code> and </code>`<code>strings</code>``:
``<code>od</code>`` only shows the strings end with the '\0' symbol.
e.g.
</p>
<pre>
$ diff -u &lt;(od -An --string /etc/ld.so.cache) &lt;(strings /etc/ld.so.cache)
--- /dev/fd/63  2014-01-20 20:52:48.985337633 +0800
+++ /dev/fd/62  2014-01-20 20:52:48.985337633 +0800
@@ -1,4 +1,5 @@
 ld.so-1.7.0
+glibc-ld.so.cache1.1
 libz.so.1
 /lib64/libz.so.1
 libz.so
</pre>
<p>
The reason why ``<code>od</code>`` doesn't show "glibc-ld.so.cache1.1" is that behind the string is \03:
</p>
<pre>
$ od -Ax -tx1z /etc/ld.so.cache | grep -A2 glibc-ld
002a40 67 6c 69 62 63 2d 6c 64 2e 73 6f 2e 63 61 63 68  &gt;glibc-ld.so.cach&lt;
002a50 65 31 2e 31 8a 03 00 00 aa a3 00 00 00 00 00 00  &gt;e1.1............&lt;
002a60 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  &gt;................&lt;
</pre>

<p>
set the max string length:
</p>
<pre>
# fail on CentOS-6
$ od -Ax -s12 /etc/ld.so.cache
</pre>

<h2 id="toc_1.2">Samples</h2>
<p>
Convert a binary file into an array in a C program:
</p>
<pre>
#!/bin/bash
# $0 objname &lt; in &gt; out
objname=${1:-objname}
# the sed script:
# show each byte as 0xNN
# delete ',' in each line
od -A n -v -t x1 | sed -e '1i\
const unsigned char '$objname'[] = {
s/\([0-9a-f][0-9a-f]\) */0x\1,/g
$s/,$//
$a\
};
</pre>

</section>
<aside id="sidebar">
<p>Wiki maintained by <a href="https://github.com/yszheda">yszheda</a></p>
<p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
</aside>
</div>
</div>
</body>
</html>
